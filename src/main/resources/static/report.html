<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KxReport</title>
    <style scoped>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0;
        padding: 0;
        background-color: black;
        background-image: url("./img/tesseract.gif");
        background-position: center;
        background-repeat: no-repeat;
        height: 100vh;
        width: 100vw;
      }

      .timer {
        font-family: monospace;
        font-weight: bold;
        font-size: 2em;
        color: white;
        padding-bottom: 120px;
      }
    </style>
  </head>

  <body>
    <div class="timer" id="timer"></div>
    <form id="form" action="openPDF" method="post" target="_self" type="hidden">
      <input type="hidden" id="app" name="app" />
      <input type="hidden" id="report" name="report" />
      <input type="hidden" id="db" name="db" />
      <input type="hidden" id="comCode" name="comCode" />
      <input type="hidden" id="comName" name="comName" />
      <input type="hidden" id="fromDate" name="fromDate" />
      <input type="hidden" id="toDate" name="toDate" />
      <input type="hidden" id="fromId" name="fromId" />
      <input type="hidden" id="toId" name="toId" />
      <input type="hidden" id="option" name="option" />
      <input type="hidden" id="idList" name="idList" />
      <input type="hidden" id="saveFile" name="saveFile" />
    </form>
  </body>
  <script lang="js">
    var mm = 0
    var ss = 1
    const timer = document.getElementById('timer')
    setInterval(() => {
      timer.textContent = (mm > 9 ? mm : '0' + mm) + ':' + (ss > 9 ? ss : '0' + ss)
      if (++ss == 60) {
        mm++
        ss = 0
      }
    }, 1000)
    const urlParams = new URLSearchParams(window.location.search)
    if (urlParams.get("report")) {
      const form = document.getElementById("form")
      for (const key in form.elements)
        if (urlParams.has(key)) {
          const element = form.elements.namedItem(key);
          if (element) {
            element.value = urlParams.get(key);
          }
        }
      form.submit()
    }
  </script>
</html>
